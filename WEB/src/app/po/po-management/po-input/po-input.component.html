<h1>{{'po.title' | translate}}</h1>

<form class="example-form" [formGroup]="inputForm" [style.fontSize.px]="16" >
	<mat-card class="example-card">
	
		<mat-card-header>
			<mat-card-title></mat-card-title>
		</mat-card-header>
	
		<mat-card-content>

			<div class="container">
	
				<!-- Item Code -->
				<div class="row">
	
					<div class="col-sm-3">
						<mat-form-field class="input_text">
							<input formControlName="supplier_cd" matInput placeholder="{{'supplier.supplier_cd' | translate}} *">
							<mat-error *ngIf="inputForm.controls['supplier_cd'].hasError('maxlength') && !inputForm.controls['supplier_cd'].hasError('required')">
								{{'supplier.supplier_code_max_length' | translate}} 20
							</mat-error>
							<mat-error *ngIf="inputForm.controls['supplier_cd'].hasError('required')">
								{{'supplier.supplier_code_required' | translate}}
							</mat-error>
						</mat-form-field>
					</div>
	
					<div class="col-sm-9">
						<mat-form-field class="input_text">
							<input formControlName="supplier_name" matInput placeholder="{{'supplier.supplier_name' | translate}} *">
							<mat-error *ngIf="inputForm.controls['supplier_name'].hasError('maxlength') && !inputForm.controls['supplier_name'].hasError('required')">
								{{'supplier.supplier_name_max_length' | translate}} 200
							</mat-error>
							<mat-error *ngIf="inputForm.controls['supplier_name'].hasError('required')">
								{{'supplier.supplier_name_required' | translate}}
							</mat-error>
						</mat-form-field>
					</div>
	
				</div>
	
				<div class="row">
					<div class="col-sm-12">
						<mat-form-field class="input_text">
							<input formControlName="address_1" matInput placeholder="{{'supplier.supplier_add' | translate}}">
						</mat-form-field>
					</div>
				</div>
	
				<div class="row">
				
					<div class="col-sm-12">
					<mat-form-field class="input_text">
					<input formControlName="address_2" matInput placeholder="{{'supplier.supplier_add' | translate}}">
					</mat-form-field>
					</div>
					
				</div>
	
				<div class="row">
				
					<div class="col-sm-12">
					<mat-form-field class="input_text">
					<input formControlName="address_3" matInput placeholder="{{'supplier.supplier_add' | translate}}">
					</mat-form-field>
					</div>
					
				</div>
	
				<div class="row">
				
					<div class="col-sm-2">
						<mat-form-field class="input_text">
						<input formControlName="zip_code" matInput placeholder="{{'supplier.supplier_zip' | translate}}">
						</mat-form-field>
					</div>
					
					<div class="col-sm-5">
						<mat-form-field class="input_text">
						<input formControlName="phone" matInput placeholder="{{'supplier.supplier_tel' | translate}}">
						</mat-form-field>
					</div>

					<div class="col-sm-5">
						<mat-form-field class="input_text">
							<input formControlName="fax" matInput placeholder="{{'supplier.supplier_fax' | translate}}">
						</mat-form-field>
					</div>
				</div>
	
	
				<div class="row">
					<div class="col-sm-6">
						<mat-form-field class="input_text">
							<input formControlName="contract_name" matInput placeholder="{{'supplier.contract_name' | translate}}">
						</mat-form-field>
					</div>
					<div class="col-sm-6">
						<mat-form-field class="input_text">
							<input formControlName="remark" matInput placeholder="{{'supplier.remark' | translate}}">
						</mat-form-field>
					</div>
				</div>

				<table >
					<thead>
						<tr>
							<th [ngStyle] = "{'width': '10%'}">
								<my-dropdown 
									[width]				= 150
									[label_width]		= 0
									[col_display]		= "'item_name'"
									[col_value]			= "'item_code'"
									[table_name]		= "'m_items'"
									[order_by]			= "'item_code'"
									[where_condition]	= "'del_flag = 0'"
									[code]				= "inputForm.get('add_item_cd').value"
									[show_text]			= "'item.item_name' | translate"
									(return_code)		= "onAddItemChange($event)">
								</my-dropdown>
							</th>
							<th [ngStyle] = "{'width': '40%'}">
								<mat-form-field class="input_text">
									<input formControlName="add_item_name" matInput placeholder="{{'po.item_name' | translate}}">
								</mat-form-field>
							</th>
							<th [ngStyle] = "{'width': '10%','align':'text-right'}">
								<mat-form-field class="input_text" [ngStyle] = "{'width': '90'}">
									<input formControlName="add_qty" type="number" matInput placeholder="{{'po.item_qty' | translate}}" (change)="onQtyChange()">
								</mat-form-field>
							</th>
							<th [ngStyle] = "{'width': '10%'}">
								<mat-form-field [ngStyle] = "{'width': '100'}">
									<mat-label>{{'po.unit_cd' | translate}}</mat-label>
									<select matNativeControl required>
										<option value="volvo">Volvo</option>
										<option value="saab">Saab</option>
										<option value="mercedes">Mercedes</option>
										<option value="audi">Audi</option>
									</select>
								</mat-form-field>
							</th>
							<th [ngStyle] = "{'width': '10%'}">
								<my-dropdown 
									[width]				= 90
									[label_width]		= 0
									[col_display]		= "'item_name'"
									[col_value]			= "'item_code'"
									[table_name]		= "'m_items'"
									[order_by]			= "'item_code'"
									[where_condition]	= "'del_flag = 0'"
									[show_text]			= "'po.unit_price' | translate"
									[type_input]		= "'number'"
									(return_code)		= "onPriceChange($event)">
								</my-dropdown>
							</th>
							<th [ngStyle] = "{'width': '10%'}">{{total_price | number}}</th>
							<th [ngStyle] = "{'width': '10%'}"><button (click)="onAddItem()">Add</button></th>
						</tr>
					</thead>
				</table>

				<table >
					<thead>
						<tr>
							<th [ngStyle] = "{'width': '10%'}">รหัส</th>
							<th [ngStyle] = "{'width': '40%'}">รายการ</th>
							<th [ngStyle] = "{'width': '10%','align':'text-right'}">จำนวน</th>
							<th [ngStyle] = "{'width': '10%'}">หน่วย</th>
							<th [ngStyle] = "{'width': '10%'}">ราคา</th>
							<th [ngStyle] = "{'width': '10%'}">มูลค่า</th>
							<th [ngStyle] = "{'width': '10%'}"></th>
						</tr>
					</thead>

					<tr formArrayName="po_details" *ngFor="let po_detail of po_details.controls; let po_detail_i = index">
						<td [ngStyle] = "{'width': '10%'}">
							<div [formGroupName]="po_detail_i" >
								<my-dropdown 
									[width]				= 150
									[label_width]		= 0
									[col_display]		= "'item_name'"
									[col_value]			= "'item_code'"
									[table_name]		= "'m_items'"
									[order_by]			= "'item_code'"
									[where_condition]	= "'del_flag = 0'"
									[code]				= "this.inputForm.get('po_details').value[po_detail_i].item_code"
									[show_text]			= "'item.item_name' | translate"
									(return_code)		= "onItemChange($event,po_detail_i)">
								</my-dropdown>
							</div>
						</td>
						<td [ngStyle] = "{'width': '40%'}">
							<div [formGroupName]="po_detail_i" >
								<mat-form-field class="input_text">
									<input formControlName="item_name" matInput placeholder="{{'po.item_name' | translate}}">
								</mat-form-field>
							</div>
						</td>
						<td [ngStyle] = "{'width': '10%'}">
							<div [formGroupName]="po_detail_i" >
								<mat-form-field class="input_text" [ngStyle] = "{'width': '100'}">
									<input formControlName="qty" matInput placeholder="{{'po.item_qty' | translate}}">
								</mat-form-field>
							</div>
						</td>
						<td [ngStyle] = "{'width': '10%'}">
							ชิ้น
						</td>
						<td [ngStyle] = "{'width': '10%'}">
							20
						</td>
						<td [ngStyle] = "{'width': '10%'}">
							40
						</td>
						<td [ngStyle] = "{'width': '10%'}">
							edit
						</td>
					</tr>
					<tr>
						<td colspan="5">Total</td>
						<td >300</td>
						<td ></td>
					</tr>
				</table>

			</div> <!-- end div container -->
	
		</mat-card-content>
	
		<mat-card-actions>
			<button mat-raised-button color="primary" (click)="onBackClick()">
				<mat-icon aria-label="Example icon-button with a heart icon">backspace</mat-icon> {{'common.back' | translate}}
			</button>
			<button mat-raised-button color="primary" (click)="onSubmit()">
				<mat-icon aria-label="Example icon-button with a heart icon">save</mat-icon> {{'common.save' | translate}}
			</button>
		</mat-card-actions>
	</mat-card>

</form>

{{this.inputForm.value | json}}
<br/>
<br/>


<br/>
<br/>
my data send to api <br/>
{{test_input_data | json}}