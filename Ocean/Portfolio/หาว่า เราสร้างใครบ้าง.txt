หาว่า เราสร้างใครบ้าง
title : ทำเอกสาร service สำหรับ portpolio ในการ หาว่า aget และ งวด ที่กำหนดมี ตัวแทนที่สร้างใหม่ กี่คน
detail : 
input เป็น agent code 7 หลัก และ งวดที่ต้องการหา
output เป็น จำนวนตัวแทนที่สร้างใหม่

หัวหน้าหน่อย ไปหา ใน sales team structure ตาม sales code และ period จะได้ id

เอา id กลับไปหาใน table sales team structure ด้วย recruiter จะได้ลูกทีมที่สร้าง

$id = select id from sales_team_structure where sales_code = '4444444' and period = '2563/01'

$array_data = select * from sales_team_structure where recruiter = $id

select a.position , count(a.position)
from sales_team_structure a 
where a.recruiter = $id


ใน wiki ใส่อันนี้นะ
Objectives
เพื่อหาจำนวน ตัวที่ที่สร้างใหม่ตาม รหัสตัวแทน 7 หลัก และ งวด

Process Overview

Preconditions

Process Description

input
agent_code    : รหัสตัวแทน 7 หลัก
select_period : งวดที่ทำการค้นหา

output
agent_count : จำนวน ตัวแทนที่สร้างใหม่

Detail

select count(agent_code_7) as agent_count
from 
(
	select agent_code_7 ,recruiter_code_7 ,min("period") as min_period
	from agpt_agent_income dai
	where recruiter_code_7  <> '' 
	group by agent_code_7 ,recruiter_code_7 
) my_data
where recruiter_code_7 = :agent_code and min_period = :period


return agent_count