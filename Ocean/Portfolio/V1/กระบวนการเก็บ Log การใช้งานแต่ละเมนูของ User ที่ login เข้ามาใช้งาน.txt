กระบวนการเก็บ Log การใช้งานแต่ละเมนูของ User ที่ login เข้ามาใช้งาน
Skip to end of metadata
Added by วิรัตน์ มหาศาลประเสริฐ, last edited by วิรัตน์ มหาศาลประเสริฐ on Jul 20, 2018  (view change)Go to start of metadata
TOC

[ Objectives ] [ Process Overview ] [ Preconditions ] [ Process Description ] [ Post-conditions ]
Objectives
เก็บ Log การใช้งานแต่ละเมนูของ User ที่ login เข้ามาใช้งาน ลงใน table >> AGPT_ACCESS_LOG
 

Process Overview
เมื่อ User ทำการ login เข้ามาจะเก็บ log ตั้งแต่การ login + default log การแสดงผลหน้าจอ Performance  จากนั้น เมื่อ User ทำการ click เข้าเมนูใดๆ ก็จะทำการเก็บ log การเข้าใช้งานในเมนูนั้น ๆ และสุดท้ายถ้ามีการ Logout หรือ Session Timeout ก็จะมีการเก็บ log ไว้ด้วยเช่นกัน
จะไม่มีการเก็บ log ของการ Register และ Forgot Password เพราะไม่ผ่านการ login เข้าใช้งาน
 

Preconditions
มีการ Login เข้ามา
 

Process Description
เมื่อ User ทำการ login เข้ามา จะทำการ query เพื่อให้ได้ ภูมิภาค, รหัสสาขา และ ชื่อสาขา เตรียมไว้ ดังนี้
Icon
select	bb.region, bb.branch_code, bb.branch_name
from		(	select	agent_code_7, max(period) as period
			from	agpt_agent_income
			where	agent_code_7 = v_agent_code --'4401758'
			group by	agent_code_7
		) aa
inner join	agpt_agent_income bb
on		aa.agent_code_7 = bb.agent_code_7
	and	aa.period = bb.period;
     

เมื่อ User ทำการ login เข้ามา จะ insert 1 record ลง table agpt_access_log โดย field access_menu มีค่าเป็น "Login"
 
เมื่อ User ทำการ click ที่เมนูใด ๆ ก็จะ insert 1 record ลง table agpt_access_log โดย field access_menu มีค่าต่าง ๆ ดังนี้
Icon
Hard Code field "access_menu"

1.) เมนู Performance ให้เก็บคำว่า "Performance"

2.) เมนู Organization ให้เก็บคำว่า "Organization"

3.) เมนู Profile ให้เก็บคำว่า "Profile"

4.) เมนู ใบคำขอ (คงเหลือ) ให้เก็บคำว่า "Application"

5.) เมนู กธ. (New Case) ให้เก็บคำว่า "Policy_New_Case"

6.) เมนู กธ. (ความคงอยู่) ให้เก็บคำว่า "Policy_Persistency"

7.) เมนู Simulation ให้เก็บคำว่า "Simulation"

8.) เมนู กธ. ทั้งหมด ให้เก็บคำว่า "Policy_All"

9.) เมนู Download ให้เก็บคำว่า "Download"

10.) เมนู Change Password ให้เก็บคำว่า "Change_Password"

     

เมื่อ User ทำการ logout จะ insert 1 record ลง table agpt_access_log โดย field access_menu มีค่าเป็น "Logout" + อีก 1 record ที่มีค่าเป็น "Session_Timeout" 
แต่ถ้า User ไม่ได้ทำอะไรจนหมดเวลา Session Timeout ก็จะทำการ insert เพียง 1 record ที่ field access_menu มีค่าเป็น "Session_Timeout"
 
สำหรับ field อื่น ๆ เก็บข้อมูลตามที่อธิบายใน >> AGPT_ACCESS_LOG     
Post-conditions
ทำการ insert Log การใช้งานแต่ละเมนูของ User ที่ login เข้ามาใช้งาน
